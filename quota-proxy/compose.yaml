services:
  quota-proxy:
    build: .
    environment:
      - PORT=8787
      - DEEPSEEK_BASE_URL=https://api.deepseek.com/v1
      - DEEPSEEK_API_KEY=${DEEPSEEK_API_KEY}
      - DAILY_REQ_LIMIT=200
      # Reserved for v1 (admin + persistence). Safe to set now; ignored by v0.
      - ADMIN_TOKEN=${ADMIN_TOKEN:-}
      - SQLITE_PATH=${SQLITE_PATH:-/data/quota-proxy.sqlite}
    restart: unless-stopped
    ports:
      # Safer default: bind to localhost only; use a reverse proxy (Caddy/Nginx)
      # to expose HTTPS publicly.
      - "127.0.0.1:8787:8787"
    volumes:
      # Reserved for v1 persistence.
      - ./data:/data
